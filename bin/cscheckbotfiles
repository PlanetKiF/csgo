#!/bin/bash

CSOWNER=%CSGO_USERNAME%
CSGODIR=/home/${CSOWNER}/csgosv
SOURCE=${CSGODIR}/csgo/botprofile.db.custom
TARGET=${CSGODIR}/csgo/botprofile.db
EXPECTED=${CSGODIR}/csgo/botprofile.db.lastorig
LOGFILE=/home/${CSOWNER}/updatelog.txt

. libshellscipts



DIFFRENCES=$(diff ${EXPECTED} ${TARGET})

if [ -z "${DIFFRENCES}" ];
  then echo "$(date)  $(basename ${0}) Restoring ${TARGET} by ${SOURCE}" >> ${LOGFILE}
     cp -f ${SOURCE} ${TARGET}
  else  DIFFRENCES2=$(diff ${SOURCE} ${TARGET})
     if [ -n "${DIFFRENCES2}" ];
       then MESSAGE="$(date)  $(basename ${0}) Problem, could not update the 'botprofile.db'. The original file is modified (probably by an update.)"
          echo "${MESSAGE}" >> ${LOGFILE}
          notifyMessengers '*Error on CS Server: script `cscheckbotfiles`.*'
       else echo "$(date)  $(basename ${0}) Nothing to do,  ${TARGET} and ${SOURCE} are equal." >> ${LOGFILE}
     fi
fi


